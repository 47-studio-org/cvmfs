#!/bin/sh

mkdir build && cd build
CFLAGS="$CFLAGS -fPIC" CXXFLAGS="$CXXFLAGS $CVMFS_PATCHED_CXXFLAGS" cmake \
    -D LWS_STATIC_PIC=ON \
    -D LWS_WITH_SSL=OFF \
    -D LWS_HAVE_LIBCAP=OFF \
    -D LWS_WITHOUT_EXTENSIONS:BOOL=ON \
    -D LWS_WITHOUT_SERVER:BOOL=ON \
    -D LWS_WITHOUT_TESTAPPS:BOOL=ON \
    -D LWS_WITHOUT_TEST_CLIENT:BOOL=ON \
    -D LWS_WITHOUT_TEST_PING:BOOL=ON \
    -D LWS_WITHOUT_TEST_SERVER:BOOL=ON \
    -D CMAKE_PREFIX_PATH=${EXTERNALS_INSTALL_LOCATION} \
    -D CMAKE_BUILD_TYPE=Release \
    ../

